!function(t){function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var n=function(t){var e=function(t,e){var n={},r=t.getAllResponseHeaders().split("\r\n");return $.each(r,function(t,e){var r=e.split(": ");r[0]&&(n[r[0].toLowerCase()]=r[1])}),{status:t.status,statusText:t.statusText,headers:n,data:e}};this.doMethod=function(n,r,u,a){var s=$.Deferred(),i=$.extend({},t._defaultHeaders,a);return $.ajax({url:r,type:n,dataType:"GET"==n?null:"json",contentType:"GET"==n?null:"application/json",headers:i,data:"undefined"!=typeof u&&null!==u?"GET"==n?u:JSON.stringify(u):null}).done(function(t,n,r){r.status>=200&&r.status<300?s.resolve(t,e(r,t)):s.reject(e(r))}),s.promise()}},r=function(t,u,a){function s(t){return h.test(t)}function i(t){return null!=t&&"object"==typeof t}function o(t,e){var n=t.match(/\/:[a-zA-Z]+/g),r=t;return n.map(function(t){var n=t.substr(2),u=e[n];"undefined"!=typeof u&&(r=r.replace(t,"/"+u))}),r}function c(t){return t=t||"",i(t)?o(d._url,t):s(t)?t:d._url+"/"+t}function f(t,e,n,r){return d._adapter.doMethod(t,c(e),n,r)}var h=/^https?:\/\//i,d=this,a=a||n;this._config=u||{},this._adapter=new a(this),this._adapterCls=a,this._defaultHeaders=this._config.headers||{},this._url=t,this.resource=function(t){var n=e({},this._config);return new r(this._url+t,n,this._adapterCls)},this.headers=function(t){var n=e({},this._defaultHeaders),u=e({},this._config);return e(n,t),e(u,{headers:n}),new r(this._url,u,this._adapterCls)},this.accept=function(t){return this.headers({accept:t})},this.get=function(t,e,n){return f("GET",t,e,n)},this.post=function(t,e,n){return f("POST",t,e,n)},this.put=function(t,e,n){return f("PUT",t,e,n)},this.patch=function(t,e,n){return f("PATCH",t,e,n)},this.delete=function(t,e){return f("DELETE",t,null,e)}};t.angular?angular.module("restiny",[]).factory("restiny",["$http","$q",function(t,e){var n=function(n){this.doMethod=function(r,u,a,s){var i=e.defer(),o=angular.extend({},n._defaultHeaders,s),c="get"==r.toLowerCase();return t({method:r,url:u,headers:o,data:c?null:a,params:c?a:null}).then(function(t){i.resolve(t)},function(t){i.reject(t)}),i.promise}};return{api:function(t,e){return new r(t,e,n)}}}]):t.Restiny=r}(this);
